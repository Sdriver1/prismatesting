import config from "../configs/config.json" with { type: "json" };
import { add_currency } from "../currency/operations/arithmetic.js";
export async function guildMemberUpdate(old_member, new_member) {
    if (!old_member.roles.cache.has(config.server.roles.other.verified) &&
        new_member.roles.cache.has(config.server.roles.other.verified)) {
        await give_gold_to_vcers(new_member.guild);
    }
}
async function give_gold_to_vcers(guild) {
    const voiceChannels = guild.channels.cache.filter((channel) => channel.isVoice());
    let user_ids = [];
    voiceChannels.forEach((channel) => {
        channel.members.forEach((member) => {
            user_ids.push(member.id);
        });
    });
    for (let id in user_ids) {
        await add_currency(id, "gold", 250);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3VpbGRNZW1iZXJVcGRhdGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZXZlbnRzL2d1aWxkTWVtYmVyVXBkYXRlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sTUFBTSxNQUFNLHdCQUF3QixDQUFDLFNBQVMsSUFBSSxFQUFFLE1BQU0sRUFBRSxDQUFDO0FBQ3BFLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxzQ0FBc0MsQ0FBQztBQUNwRSxNQUFNLENBQUMsS0FBSyxVQUFVLGlCQUFpQixDQUNyQyxVQUErQixFQUMvQixVQUErQjtJQUUvQixJQUNFLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUM7UUFDL0QsVUFBVSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsRUFDOUQsQ0FBQztRQUNELE1BQU0sa0JBQWtCLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzdDLENBQUM7QUFDSCxDQUFDO0FBRUQsS0FBSyxVQUFVLGtCQUFrQixDQUFDLEtBQUs7SUFDckMsTUFBTSxhQUFhLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FDNUQsT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUNsQixDQUFDO0lBRUYsSUFBSSxRQUFRLEdBQUcsRUFBRSxDQUFDO0lBRWxCLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRTtRQUNoQyxPQUFPLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFO1lBQ2pDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQzNCLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDSCxLQUFLLElBQUksRUFBRSxJQUFJLFFBQVEsRUFBRSxDQUFDO1FBQ3hCLE1BQU0sWUFBWSxDQUFDLEVBQUUsRUFBRSxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDdEMsQ0FBQztBQUNILENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBEaXNjb3JkIGZyb20gXCJkaXNjb3JkLmpzXCI7XHJcbmltcG9ydCBjb25maWcgZnJvbSBcIi4uL2NvbmZpZ3MvY29uZmlnLmpzb25cIiBhc3NlcnQgeyB0eXBlOiBcImpzb25cIiB9O1xyXG5pbXBvcnQgeyBhZGRfY3VycmVuY3kgfSBmcm9tIFwiLi4vY3VycmVuY3kvb3BlcmF0aW9ucy9hcml0aG1ldGljLmpzXCI7XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBndWlsZE1lbWJlclVwZGF0ZShcclxuICBvbGRfbWVtYmVyOiBEaXNjb3JkLkd1aWxkTWVtYmVyLFxyXG4gIG5ld19tZW1iZXI6IERpc2NvcmQuR3VpbGRNZW1iZXJcclxuKSB7XHJcbiAgaWYgKFxyXG4gICAgIW9sZF9tZW1iZXIucm9sZXMuY2FjaGUuaGFzKGNvbmZpZy5zZXJ2ZXIucm9sZXMub3RoZXIudmVyaWZpZWQpICYmXHJcbiAgICBuZXdfbWVtYmVyLnJvbGVzLmNhY2hlLmhhcyhjb25maWcuc2VydmVyLnJvbGVzLm90aGVyLnZlcmlmaWVkKVxyXG4gICkge1xyXG4gICAgYXdhaXQgZ2l2ZV9nb2xkX3RvX3ZjZXJzKG5ld19tZW1iZXIuZ3VpbGQpO1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2l2ZV9nb2xkX3RvX3ZjZXJzKGd1aWxkKSB7XHJcbiAgY29uc3Qgdm9pY2VDaGFubmVscyA9IGd1aWxkLmNoYW5uZWxzLmNhY2hlLmZpbHRlcigoY2hhbm5lbCkgPT5cclxuICAgIGNoYW5uZWwuaXNWb2ljZSgpXHJcbiAgKTtcclxuXHJcbiAgbGV0IHVzZXJfaWRzID0gW107XHJcblxyXG4gIHZvaWNlQ2hhbm5lbHMuZm9yRWFjaCgoY2hhbm5lbCkgPT4ge1xyXG4gICAgY2hhbm5lbC5tZW1iZXJzLmZvckVhY2goKG1lbWJlcikgPT4ge1xyXG4gICAgICB1c2VyX2lkcy5wdXNoKG1lbWJlci5pZCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuICBmb3IgKGxldCBpZCBpbiB1c2VyX2lkcykge1xyXG4gICAgYXdhaXQgYWRkX2N1cnJlbmN5KGlkLCBcImdvbGRcIiwgMjUwKTtcclxuICB9XHJcbn1cclxuIl19